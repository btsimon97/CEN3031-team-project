(this["webpackJsonpmy-app2"]=this["webpackJsonpmy-app2"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),l=a.n(c),o=(a(90),a(10)),u=a.n(o),s=a(24),i=a(17),m=a(21),p=a.n(m),d=a(7),E=a(19),f=a(23),g=a(16),h=function(e){var t=e.currentAppData,a=(e.setCurrentAppData,Object(n.useState)([])),c=Object(i.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)((function(){return console.log("App mounted"),function(){console.log("Add unmounted")}}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{className:"col-5"},r.a.createElement("h1",null,"Add New Instrument"),r.a.createElement(d.a,null,r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Instrument Keywords"),r.a.createElement(d.a.Control,{type:"text",placeholder:"scalpel,single-use",onSubmit:function(e){console.log(e.target.value),e.preventDefault();var a,n=l.split(",");o(n),a={keyterms:n},p.a.post("https://cen3031-team-project.herokuapp.com/api/listings/",a).then((function(e){return console.log(t)})).then(console.log("success!"))}}),r.a.createElement(d.a.Text,{className:"text-muted"},"Enter the keywords you want to use to find this instrument. Separate your keywords with a comma if using multiple keywords.")),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Add Instrument")))))},b=a(60),v=a.n(b),k=p.a.create();k.getToken=function(){return localStorage.getItem("token")},k.setToken=function(e){return localStorage.setItem("token",e),e},k.getCurrentUser=function(){var e=this.getToken();return e?v()(e):null},k.logIn=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/api/users/authenticate",t);case 3:if(a=e.sent,!(n=a.data.token)){e.next=10;break}return this.defaults.headers.common.token=this.setToken(n),e.abrupt("return",v()(n));case 10:return e.abrupt("return",!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),k.signUp=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/users",t);case 2:if(a=e.sent,!(n=a.data.token)){e.next=9;break}return this.defaults.headers.common.token=this.setToken(n),e.abrupt("return",v()(n));case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),k.logOut=function(){return localStorage.removeItem("token"),delete this.defaults.headers.common.token,!0},k.defaults.headers.common.token=k.getToken();var y=k,w=function(e){var t=e.setFilterText;return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Search Term(s)"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter search terms",onChange:function(e){t(e.target.value)}}))))},j=function(e){var t=e.instrument;return console.log(t),t?r.a.createElement("div",null,r.a.createElement("more",null," ",!t.keyterms||r.a.createElement("i",null," keyterms: ",t.keyterms.toString()))):r.a.createElement("div",null,r.a.createElement("vmore",null," ",r.a.createElement("i",null,"Click on a tool to view more information")))},x=a(30),O=function(e){var t=e.filterText,a=e.currentAppData,c=e.setCurrentAppData,l=e.setInstrument,o=Object(n.useState)(0),m=Object(i.a)(o,2),d=(m[0],m[1]);Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching"),e.next=3,p.a.get("http://localhost:5000/api/listings/");case 3:for(t=e.sent,c(t.data),n=0;n<a.length;n++)a[n].id=a[n]._id;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var f=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(0),e.next=3,p.a.delete("http://localhost:5000/api/listings/".concat(t));case 3:return e.sent,e.next=6,p.a.get("http://localhost:5000/api/listings/");case 6:a=e.sent,c(a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=a.filter((function(e){if(""!==t.trim()){var a=new RegExp(escape(t.trim().toLowerCase())),n=t.split(",");if(n.length>1){for(var r="",c=0;c<n.length;c++){r+=("(?=.*"+n[c]+")").trim().toLowerCase().replace(/ /g,"")}a=new RegExp(r+".+","gi")}return console.log(e.keyterms.toString().replace(/,/g," ")),!(!e||!a.test(e.keyterms.toString().replace(/,/g," ").toLowerCase().trim()))}return!0})).map((function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",{key:e._id,onClick:function(){l(a.find((function(t){return t._id===e._id}))),d(e._id)}},r.a.createElement("td",null,e.keyterms.toString()),r.a.createElement("td",{key:e._id},r.a.createElement(E.a,{variant:"danger",onClick:function(){return f(e._id)}},"Delete!"))))}));return r.a.createElement("div",null,g)},C=a(63),S=function(e){var t=e.currentAppData,a=e.setCurrentAppData,c=Object(n.useState)(""),l=Object(i.a)(c,2),o=l[0],u=l[1],s=Object(n.useState)(),m=Object(i.a)(s,2),p=m[0],d=m[1];return r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{className:"col-8"},r.a.createElement(w,{setFilterText:u}))),r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement("h2",null,"Medical Device List"),r.a.createElement(C.a,{bordered:!0,hover:!0,striped:!0,responsive:!0},r.a.createElement("tbody",null,r.a.createElement(O,{filterText:o,setCurrentAppData:a,currentAppData:t,setInstrument:d})))),r.a.createElement(g.a,null,r.a.createElement(j,{instrument:p}))))},L=a(48),A=a(61),I=a(38),D=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(L.a.Brand,{href:"#"},"Medical Image Search"),r.a.createElement(L.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(L.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(A.a,{className:"mr-auto"},r.a.createElement(x.LinkContainer,{to:"/Home"},r.a.createElement(A.a.Link,{href:"#"},"Home")),r.a.createElement(x.LinkContainer,{to:"/add"},r.a.createElement(A.a.Link,{href:"#"},"Add")),e.currentUser?r.a.createElement(I.a,{title:"Account",id:"basic-nav-dropdown",bg:"dark",variant:"dark"},r.a.createElement(x.LinkContainer,{to:"/dashboard"},r.a.createElement(I.a.Item,{href:"#"},"Profile")),r.a.createElement(x.LinkContainer,{to:"/logout"},r.a.createElement(I.a.Item,{href:"#"},"Logout"))):r.a.createElement(I.a,{title:"Login/Register",id:"basic-nav-dropdown",bg:"dark",variant:"dark"},r.a.createElement(x.LinkContainer,{to:"/login"},r.a.createElement(I.a.Item,{href:"#"},"Login")),r.a.createElement(x.LinkContainer,{to:"/signup"},r.a.createElement(I.a.Item,{href:"#"},"Sign-Up")))))))},N=a(44),T=a(57),F=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(i.a)(t,2),c=a[0],l=a[1],o=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,y.logIn(c);case 3:n=t.sent,l({email:"",password:""}),n&&(e.onLoginSuccess(n),e.history.push("/"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{className:"col-5"},r.a.createElement("h1",null,"Log In"),r.a.createElement(d.a,{onChange:function(e){e.persist(),l((function(t){return Object(T.a)({},t,Object(N.a)({},e.target.name,e.target.value))}))},onSubmit:o},r.a.createElement(d.a.Group,{controlId:"formbasicEmail"},r.a.createElement(d.a.Label,null,"Email Address"),r.a.createElement(d.a.Control,{type:"email",placeholder:"email@example.com",name:"email"})),r.a.createElement(d.a.Group,{controlId:"formBasicPassword"},r.a.createElement(d.a.Label,null,"Password"),r.a.createElement(d.a.Control,{type:"password",placeholder:"Password",name:"password"})),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Login")))))},U=function(e){var t=Object(n.useState)({name:"",email:"",password:""}),a=Object(i.a)(t,2),c=a[0],l=a[1],o=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Submitted"),console.log((void 0).input.value),a.preventDefault(),t.next=5,y.signUp(c);case 5:n=t.sent,l({name:"",email:"",password:""}),n&&(e.onSignUpSuccess(n),e.history.push("/"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{className:"col-5"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement(d.a,{onChange:function(e){!function(e){e.persist(),l(Object(T.a)({},c,Object(N.a)({},e.target.name,e.target.value))),console.log(c)}(e)},onSubmit:function(e){o(e)}},r.a.createElement(d.a.Group,{controlId:""},r.a.createElement(d.a.Label,null,"Name"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Alex Smith",name:"name"})),r.a.createElement(d.a.Group,{controlId:"formbasicEmail"},r.a.createElement(d.a.Label,null,"Email Address"),r.a.createElement(d.a.Control,{type:"email",placeholder:"email@example.com",name:"email"})),r.a.createElement(d.a.Group,{controlId:"formBasicPassword"},r.a.createElement(d.a.Label,null,"Password"),r.a.createElement(d.a.Control,{type:"password",placeholder:"Password",name:"password"})),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Register")))))},P=a(34),_=function(e){return Object(n.useEffect)((function(){e.onLogOut()}),[]),r.a.createElement(P.c,{to:"/login"})},G=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to your dashboard!"))},R=a(83),B=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("br",null),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(g.a,{className:"col-7"},r.a.createElement(R.a,null,r.a.createElement("h1",null,"Page Not Found"),r.a.createElement("p",null,"We're sorry, but the page you're attempting to access could not be found."),r.a.createElement("p",null,"If you followed an external link to get here, double-check your typing and try again."),r.a.createElement("p",null,"You may also be getting this message if you are attempting to access a page that requires authentication and are not signed in. Try logging in or creating an account and retry the operation again."),r.a.createElement("p",null,"If you're not sure where to go from here, click the button below to return to the home page."),r.a.createElement(x.LinkContainer,{to:"/Home"},r.a.createElement(E.a,{variant:"primary"},"Return to Homepage"))))))},H=a(26),J=a(51),M=function(){var e=Object(n.useState)(y.getCurrentUser()),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),m=o[0],d=o[1];Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://cen3031-team-project.herokuapp.com/api/listings/");case 2:for(t=e.sent,d(t.data),a=0;a<m.length;a++)m[a].id=m[a]._id;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("App mounted"),function(){e.apply(this,arguments)}()}),[]);var E=function(){c(y.getCurrentUser())},f=function(){y.logOut(),c(null)};return r.a.createElement(H.BrowserRouter,null,r.a.createElement(D,{currentUser:a}),r.a.createElement("body",null,r.a.createElement(J.a,{fluid:!0},r.a.createElement(P.g,null,r.a.createElement(P.d,{exact:!0,path:"/home",render:function(){return r.a.createElement(S,{currentAppData:m,setCurrentAppData:d})}}),r.a.createElement(P.d,{exact:!0,path:"/",render:function(){return r.a.createElement(S,{currentAppData:m,setCurrentAppData:d})}}),r.a.createElement(P.d,{path:"/login",render:function(e){return r.a.createElement(F,Object.assign({},e,{onLoginSuccess:E,Redirect:!0,to:"/home"}))}}),r.a.createElement(P.d,{path:"/signup",render:function(e){return r.a.createElement(U,Object.assign({},e,{onSignUpSuccess:E}))}}),r.a.createElement(P.d,{path:"/logout",render:function(e){return r.a.createElement(_,{onLogOut:f})}}),r.a.createElement(P.d,{path:"/dashboard",render:function(){return a?r.a.createElement(G,null):r.a.createElement(P.c,{to:"/login"})}}),r.a.createElement(P.d,{exact:!0,path:"/add",render:function(){return r.a.createElement(h,{currentAppData:m,setCurrentAppData:d})}}),r.a.createElement(P.d,{path:"*",component:B})))))};l.a.render(r.a.createElement(M,null),document.getElementById("root"))},85:function(e,t,a){e.exports=a(119)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.692b8f3f.chunk.js.map